package com.appsflyer.internal;

import android.content.Context;
import android.content.pm.InstallSourceInfo;
import android.content.pm.PackageManager;
import android.os.Build;
import com.appsflyer.AFLogger;
import java.util.LinkedHashMap;
import java.util.Map;
import kotlin.jvm.internal.Intrinsics;
import org.jetbrains.annotations.NotNull;
/* loaded from: /home/runner/work/discord-client-datamining/discord-client-datamining/build/classes.dex */
public final class AFg1xSDK {
    @NotNull
    private final String AFAdRevenueData;
    @NotNull
    private final Map<String, Object> getMediationNetwork;
    private final PackageManager getMonetizationNetwork;

    public AFg1xSDK(@NotNull AFc1gSDK aFc1gSDK, @NotNull AFc1pSDK aFc1pSDK) {
        PackageManager packageManager;
        Intrinsics.checkNotNullParameter(aFc1gSDK, "");
        Intrinsics.checkNotNullParameter(aFc1pSDK, "");
        this.getMediationNetwork = new LinkedHashMap();
        Context context = aFc1gSDK.getRevenue;
        if (context != null) {
            packageManager = context.getPackageManager();
        } else {
            packageManager = null;
        }
        this.getMonetizationNetwork = packageManager;
        String packageName = aFc1pSDK.getRevenue.getRevenue.getPackageName();
        Intrinsics.checkNotNullExpressionValue(packageName, "");
        this.AFAdRevenueData = packageName;
    }

    private final Map<String, Object> AFAdRevenueData() {
        InstallSourceInfo installSourceInfo;
        LinkedHashMap linkedHashMap = new LinkedHashMap();
        try {
            String str = this.AFAdRevenueData;
            PackageManager packageManager = this.getMonetizationNetwork;
            if (packageManager != null && (installSourceInfo = packageManager.getInstallSourceInfo(str)) != null) {
                Intrinsics.checkNotNullExpressionValue(installSourceInfo, "");
                LinkedHashMap linkedHashMap2 = new LinkedHashMap();
                String initiatingPackageName = installSourceInfo.getInitiatingPackageName();
                if (initiatingPackageName != null) {
                    linkedHashMap2.put("initiating_package", initiatingPackageName);
                }
                String installingPackageName = installSourceInfo.getInstallingPackageName();
                if (installingPackageName != null) {
                    linkedHashMap2.put("installing_package", installingPackageName);
                }
                String originatingPackageName = installSourceInfo.getOriginatingPackageName();
                if (originatingPackageName != null) {
                    linkedHashMap2.put("originating_package", originatingPackageName);
                }
                return linkedHashMap2;
            }
        } catch (Throwable th2) {
            AFh1ySDK.e$default(AFLogger.INSTANCE, AFg1cSDK.DEVICE_DATA, "Failed to get the app install source info", th2, true, false, true, true, 16, null);
        }
        return linkedHashMap;
    }

    @NotNull
    public final Map<String, Object> getCurrencyIso4217Code() {
        String installerPackageName;
        if (this.getMediationNetwork.isEmpty()) {
            try {
                PackageManager packageManager = this.getMonetizationNetwork;
                if (packageManager != null && (installerPackageName = packageManager.getInstallerPackageName(this.AFAdRevenueData)) != null) {
                    this.getMediationNetwork.put("installer_package", installerPackageName);
                }
            } catch (Exception e10) {
                AFLogger.afErrorLog("Exception while getting the app's installer package. ", e10);
            }
            if (Build.VERSION.SDK_INT >= 30) {
                this.getMediationNetwork.put("install_source_info", AFAdRevenueData());
            }
        }
        return this.getMediationNetwork;
    }
}
